<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VIGIPHARMA-CI ‚Äî Fiche m√©dicament</title>
  <style>
    :root{
      --bg:#f7f8fc; --stroke: rgba(15,23,42,.12);
      --text:#111827; --muted:#374151; --violet:#7c3aed; --violet2:#a78bfa;
      --shadow: 0 20px 50px rgba(15,23,42,.12);
      --radius2: 26px;

      /* üëá R√©glage unique : taille max de l'image */
      --imgH: 240px; /* ‚Üê baisse √† 200px si tu veux encore plus petit */
    }

    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background:
        radial-gradient(900px 500px at 10% 0%, rgba(167,139,250,.18), transparent 55%),
        radial-gradient(900px 500px at 90% 10%, rgba(124,58,237,.14), transparent 55%),
        var(--bg);
      color: var(--text);
    }

    .wrap{ max-width: 980px; margin: 22px auto; padding: 0 16px; }

    .card{
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.92);
      border-radius: var(--radius2);
      box-shadow: var(--shadow);
      padding: 18px;
    }

    .top{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px; margin-bottom: 14px;
    }

    .btn{
      border:none; cursor:pointer;
      background: linear-gradient(135deg, var(--violet), var(--violet2));
      color:#fff; padding: 10px 14px; border-radius: 14px;
    }

    .title{ margin:0; font-size: 22px; }
    .sub{ color: var(--muted); margin: 6px 0 0; }

    /* =========================
       Image fiche m√©dicament
       ========================= */

    /* On ne force plus l'image en pleine largeur */
    .media{
      border:1px solid var(--stroke);
      border-radius: 18px;
      overflow: hidden;
      background: rgba(255,255,255,.85);
      margin: 14px 0 18px;
      padding: 14px; /* ‚úÖ encadr√© */
    }

    /* L'image est maintenant contr√¥l√©e */
    .media img.med-image{
      display:block;
      width: 100%;
      max-width: 560px;        /* ‚úÖ limite largeur (√©vite le ‚Äúplein √©cran‚Äù) */
      max-height: var(--imgH); /* ‚úÖ limite hauteur */
      margin: 0 auto;          /* ‚úÖ centr√© */
      object-fit: contain;     /* ‚úÖ pas de d√©formation */
      background: #fff;
      border-radius: 14px;
    }

    .grid{ display:grid; grid-template-columns: 1fr 1fr; gap: 14px; }
    @media (max-width: 820px){ .grid{ grid-template-columns: 1fr; } }

    .box{
      border:1px solid var(--stroke);
      border-radius: 18px;
      padding: 14px;
      background: rgba(255,255,255,.80);
    }

    .box h3{ margin:0 0 8px; font-size: 14px; }
    .box p{ margin:0; color: var(--muted); line-height: 1.6; }

    .pill{
      display:inline-flex; gap:8px; align-items:center;
      padding: 6px 10px; border-radius: 999px;
      border:1px solid var(--stroke);
      background: rgba(124,58,237,.10);
      color: #3b0764;
      font-size: 12px;
      margin-top: 10px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <div>
        <h1 class="title" id="medTitle">Fiche m√©dicament</h1>
        <div class="sub" id="medMeta">‚Äî</div>
      </div>
      <button class="btn" onclick="history.back()">‚Üê Retour</button>
    </div>

    <div class="card">
      <div class="media">
        <!-- ‚úÖ on ajoute la classe med-image -->
        <img id="medImg" class="med-image" src="" alt="Image du m√©dicament" />
      </div>

      <div class="grid">
        <div class="box">
          <h3>‚úÖ Indications</h3>
          <p id="indications"></p>
        </div>
        <div class="box">
          <h3>üíä Posologie / Dosage</h3>
          <p id="posologie"></p>
        </div>
        <div class="box">
          <h3>‚ö†Ô∏è Pr√©cautions / Consignes</h3>
          <p id="precautions"></p>
        </div>
        <div class="box">
          <h3>üîÅ Interactions (prototype)</h3>
          <p id="interactions"></p>
        </div>
      </div>

      <div class="pill">‚öôÔ∏è Prototype : contenu de d√©monstration (√† remplacer par donn√©es valid√©es).</div>
    </div>
  </div>

  <script>
    // 1) Base de donn√©es "proto"
    const FICHES = {
      doliprane: {
        nom: "DOLIPRANE",
        dci: "Parac√©tamol",
        classe: "Antalgique / antipyr√©tique",
        image: "dolipranemedoc.png",
        indications: "Douleurs l√©g√®res √† mod√©r√©es, fi√®vre.",
        posologie: "Selon l‚Äô√¢ge/poids. Respecter la dose maximale journali√®re. Espacer les prises.",
        precautions: "Attention en cas d‚Äôinsuffisance h√©patique, alcool, surdosage. Demander conseil si doute.",
        interactions: "Anticoagulants (surveillance), alcool (risque h√©patique)."
      },
      efferalgan: {
        nom: "EFFERALGAN",
        dci: "Parac√©tamol",
        classe: "Antalgique / antipyr√©tique",
        image: "efferalgan.png",
        indications: "Douleurs l√©g√®res √† mod√©r√©es, fi√®vre.",
        posologie: "Selon l‚Äô√¢ge/poids. Espacer les prises. Respecter la dose maximale.",
        precautions: "Attention aux associations contenant d√©j√† du parac√©tamol (risque surdosage).",
        interactions: "Anticoagulants (surveillance), alcool."
      }
    };

    // 2) Lire ?med=...
    const params = new URLSearchParams(location.search);
    const key = (params.get("med") || "").toLowerCase().trim();

    // 3) Afficher
    const fiche = FICHES[key];

    const imgEl = document.getElementById("medImg");

    if(!fiche){
      document.getElementById("medTitle").textContent = "M√©dicament introuvable (prototype)";
      document.getElementById("medMeta").textContent = "Essayez : doliprane, efferalgan";
      imgEl.style.display = "none"; // ‚úÖ cache l'image si pas de fiche
      document.getElementById("indications").textContent = "Aucune fiche correspondante.";
      document.getElementById("posologie").textContent = "‚Äî";
      document.getElementById("precautions").textContent = "‚Äî";
      document.getElementById("interactions").textContent = "‚Äî";
    } else {
      document.getElementById("medTitle").textContent = fiche.nom;
      document.getElementById("medMeta").textContent = `DCI : ${fiche.dci} ‚Ä¢ ${fiche.classe}`;

      imgEl.src = fiche.image;
      imgEl.alt = `Image : ${fiche.nom}`;
      imgEl.loading = "lazy";

      document.getElementById("indications").textContent = fiche.indications;
      document.getElementById("posologie").textContent = fiche.posologie;
      document.getElementById("precautions").textContent = fiche.precautions;
      document.getElementById("interactions").textContent = fiche.interactions;
    }
  </script>
</body>
</html>
